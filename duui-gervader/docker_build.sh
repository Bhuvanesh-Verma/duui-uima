#!/usr/bin/env bash
set -euo pipefail

export TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_NAME=gervader_duui
export TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_VERSION=1.0.2

#export TEXTIMAGER_DUUI_VADER_SENTIMENT_LOG_LEVEL=DEBUG
export TEXTIMAGER_DUUI_VADER_SENTIMENT_LOG_LEVEL=INFO

export DOCKER_REGISTRY="docker.texttechnologylab.org/"

docker build \
  --build-arg TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_NAME \
  --build-arg TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_VERSION \
  --build-arg TEXTIMAGER_DUUI_VADER_SENTIMENT_LOG_LEVEL \
  -t ${DOCKER_REGISTRY}${TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_NAME}:${TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_VERSION} \
  -f "src/main/docker/Dockerfile" \
  .

docker tag \
  ${DOCKER_REGISTRY}${TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_NAME}:${TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_VERSION} \
  ${DOCKER_REGISTRY}${TEXTIMAGER_DUUI_VADER_SENTIMENT_ANNOTATOR_NAME}:latest
